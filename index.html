<!DOCTYPE html>
<html>

	<head>
		<meta charset='utf-8' />
		<meta http-equiv="X-UA-Compatible" content="chrome=1" />
		<meta name="description" content="Slate is a responsive theme for GitHub Pages" />

		<link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

		<title>lfswsrelay.js : A WebSocket based InSim relay client for LFSWorld</title>
	</head>

	<body>

		<!-- HEADER -->
		<div id="header_wrap" class="outer">
			<header class="inner">
			<a id="forkme_banner" href="https://github.com/theangryangel/lfswsrelay.js">View on GitHub</a>

			<h1 id="project_title">lfswsrelay.js</h1>
			<h2 id="project_tagline">A WebSocket based InSim relay client for LFSWorld</h2>

			<section id="downloads">
			<a class="zip_download_link" href="https://github.com/theangryangel/lfswsrelay.js/archive/master.zip">Download this project as a .zip file</a>
			<a class="tar_download_link" href="https://github.com/theangryangel/lfswsrelay.js/archive/master.tar.gz">Download this project as a tar.gz file</a>
			</section>
			</header>
		</div>

		<!-- MAIN CONTENT -->
		<div id="main_content_wrap" class="outer">
			<section id="main_content" class="inner">
			<h3>Requirements &amp; Prerequisties</h3>
			<ul>
				<li>A modern browser that supports WebSockets and ArrayBuffers</li>
				<li><a href="https://github.com/theangryangel/jspack-arraybuffer">jspack-arraybuffer</a></li>
			</ul>

			<h3>What is it?</h3>
			<ul>
				<li><a href="http://www.lfs.net/">Live For Speed</a> is a online racing simulator</li>
				<li>InSim is a protocol to communicate with LFS client and servers</li>
				<li><a href="http://www.lfsworld.net/">LFS World</a> is the online stats, and InSim relay service provided
				by the Live For Speed developers</li>
				<li>The InSim relay talks TCP and also WebSockets</li>
				<li>lfswsrelay.js is a convenience wrapper to communicate with the
				WebSocket implementation</li>
			</ul>

			<p>Got it?</p>

			<h3>What's it used for?</h3>
			<p>With a modern web browser, this allows you to display information on your website, about your Live For Speed game server(s) without any server side programming.</p>

			<h3>I've got no imagination.. Can you give me an example?</h3>
			<p>A list of current players, the current map and number of laps, a live updating map with everyone's positions.</p>
			<p>Cool, huh?</p>

			<h3>Usage</h3>
			<ol>
				<li>Download <a href="https://github.com/theangryangel/lfswsrelay.js/archive/master.zip">lfswsrelay.js</a></li>
				<li>Download <a href="https://github.com/theangryangel/jspack-arraybuffer">jspack-arraybuffer</a></li>
				<li>Include relay.js from lfswsrelay.js and struct.js from jspack-arraybuffer:
					<pre><code>&lt;script type="text/javascript" charset="utf-8" src="struct.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" charset="utf-8" src="relay.js"&gt;&lt;/script&gt;</code></pre>
				</li>
				<li>Now you need to initialise the relay client and send relay &amp; insim packets according to the data you want to receive:
					<pre><code>var client = new lfswsrelay.client();

// When connected, request a list of hosts
client.on('connected', function()
{
	var payload = new lfswsrelay.packets.IR_HLR().pack();
	client.send(payload);
});

// When we receive a IR_HOS (a partial list of hosts registered with the relay)
// log it to the console
client.on('IR_HOS', function(data)
{
	console.log(data);
});

// When we get disconnected, log "disconnected" in the console
client.on('disconnected', function()
{
	console.log('disconnected!');
});

// connect to the relay
client.connect();</code></pre>A full list of relay specific packets are
				available at the <a
					href="http://www.lfsforum.net/showthread.php?t=30740">LFS
					Forum</a>, and a full list of InSim packets are available in
				your LFS installs docs/insim.txt, at online at the <a href="http://en.lfsmanual.net/wiki/InSim.txt">LFS Wiki</a>.
				</li>
			</ol>

			<h3>Want more comprehensive examples?</h3>
			<p>Checkout the <a href="https://github.com/theangryangel/lfswsrelay.js/tree/master/example">examples/ directory</a> of the github repository.</p>

			</section>
		</div>

		<!-- FOOTER  -->
		<div id="footer_wrap" class="outer">
			<footer class="inner">
			<p class="copyright">Slate theme maintained by <a href="https://github.com/jsncostello">Jason Costello</a></p>
			<p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
			</footer>
		</div>

	</body>
</html>
